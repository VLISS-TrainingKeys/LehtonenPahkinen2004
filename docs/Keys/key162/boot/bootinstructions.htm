<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">

<html>

<head>
<title>INSTRUCTIONS</title>
<base target="_self">
</head>

<body bgcolor="#C0C0C0">

<p align="center" style="text-align:center"><font face="Arial Black">INSTRUCTIONS
FOR KEY 162: BOOTSTRAP TECHNIQUE AND BOOT MACRO</font></p>
<hr>
<p><span style="font-family:Arial">In this part we will study the variance
approximation of a proportion estimator of CHRON (chronic morbidity) and a mean
estimator of SYSBP (systolic blood pressure) by using the BOOTSTRAP technique
for the MFH Survey subgroup of 30-64 years old males.</span></p>
<p><i><span style="font-family:Arial Black">NUMBER OF BOOTSTRAP SAMPLES GENERATED</span></i></p>
<p><span style="font-family:Arial">Please select the number of bootstrap samples
to be generated (K=10, 100, 500 or 1000) from the drop-down menu on the left. This
allows you to examine how the distribution of bootstrap estimates changes when
increasing the number of bootstrap samples.</span></p>
<p><span style="font-family:Arial">In each experiment, the cluster sample sums
and the first 10 weights (w1-w10) are shown. The, bootstrap estimates and their
variance contributions&nbsp;for the first 10 bootstrap samples are viewed and
the bootstrap estimates and variance estimates are displayed. The distribution
of the bootstrap estimates for each value of K are shown in the graph at the end
of output.
An option for a summary display covering all values of K is also available.</span></p>
<p><i><span style="font-family:Arial Black">TECHNICAL DESCRIPTION OF SAS MACRO BOOT</span></i></p>
<p><span style="font-family:Arial">The SAS macro BOOT can be used for the
bootstrap approximation of the variance of a combined ratio estimator from
stratified cluster samples. For simplicity, we assume here that an equal number
(&gt;1) of sample clusters is drawn from each stratum. The MFH Survey sampling
design is of this type with two sample clusters per stratum. The appropriate
formulae for bootstrap variance estimation are given in Section 5.4 (Lehtonen
&amp; Pahkinen 2004).</span></p>
<p><span style="font-family:Arial">The macro BOOT is written in SAS language. In
the macro, we use SAS data step for the generation of bootstrap samples and for processing of SAS data sets. In addition, SAS procedures APPEND, GCHART,
MEANS, PRINT, SORT and TRANSPOSE are used. The macro has two main parts. The
appropriate cluster-level data set is first constructed. The second part
includes subparts for bootstrap sample generation, for ratio estimation from the
resulting bootstrap samples, and for bootstrap variance approximation. The steps
are the following.</span></p>
<p><i><span style="font-family:Arial Black">STEP 1</span></i></p>
<p><span style="font-family:Arial">Generate input data set. A cluster-level SAS
data set MFH is obtained with 48 observations and 5 variables: the design
identifiers STRATUM and CLUSTER, the variables SYSBP and CHRON for cluster-level
sample sums of the response variables, and the variable X for cluster-level
sample sizes. The data set can be obtained from an element-level data set by the
SAS procedure SUMMARY; here, the cluster-level data set is readily available.</span></p>
<p><i><span style="font-family:Arial Black">STEP 2</span></i></p>
<p><span style="font-family:Arial">Bootstrap samples and BOOT variance
approximation. A SAS macro %BOOT is defined with six macro variables. The
variable K determines the number of bootstrap samples to be generated (here
10,100, 500 or 1000). The macro variable STRATA carries the number of strata
(H=24) and the variable CLUSTERS is for the number of sample clusters per
stratum (here 2). The macro variables DSNAME, RESP and SEED are for the input
data set name, for the response variable name, and for the initial seed for
random number generation, respectively. First, the parent estimate (the variable
RHAT) is calculated from the data set PSUSUM, which is derived from the input
data set MFH. RHAT is saved to the corresponding data set.</span></p>
<p><span style="font-family:Arial">The second step is further divided into three
subparts:</span></p>
<p><i><span style="font-family:Arial">STEP 2.1</span></i></p>
<p><span style="font-family:Arial">Calculation of weight matrix. A total of K
independent bootstrap samples are generated by using the SAS random number
function RANUNI which generates independent uniform random variates resulting
the SAS data set WGT which includes the generated bootstrap samples. Data set
WGT is reshaped to a weight matrix (data set W) by the SAS procedure TRANSPOSE.
The data set W is merged with the data set PSUSUM to form a new SAS data set
PSUSUMW. There are total of K weight variables W1, W2,... in the data set, each
with a value 0, 1, 2, so that the sum of the weights is two in each stratum and
the sum of the weights is 48 for each weight variable. The first 10 weight
variables from data set PSUSUMW are printed.</span></p>
<p><i><span style="font-family:Arial">STEP 2.2</span></i></p>
<p><span style="font-family:Arial">Combined ratio estimates from bootstrap
samples. By using the weight variables in the data set PSUSUMW, ratio estimates
are calculated from the bootstrap samples. The corresponding bootstrap estimate
(RBOOT) is then calculated as an average of the K estimates and saved to data
set B. Data sets B and RHAT are merged with BOOT. Then, for the construction of
the bootstrap variance estimates, the appropriate squared differences are
calculated (SR1 and SR2). The first 10 observations are printed.</span></p>
<p><i><span style="font-family:Arial">STEP 2.3</span></i></p>
<p><span style="font-family:Arial">Bootstrap variance approximation. The
bootstrap variance approximations (VAR1 and VAR 2) in the data set (BOOTEST)
with the corresponding standard-error estimates (the variables SE1 and SE2) are
then calculated and printed together with the ratio estimates by using the
procedure GCHART.</span></p>
<p><span style="font-family:Arial">The statement %MEND BOOT closes the macro.
The macro is called by using the statement</span></p>
<p><span style="font-family:Arial Black">%BOOT(DSNAME,RESP,SEED,CLUSTERS,STRATA,SAMPLES,TIMES);</span><font face="Arial Black">
</font>
<o:p>
</o:p>
</p>
<p><font face="Arial Black">NOTE</font><span style="font-family:Arial"><b><o:p>
</o:p>
</b>
</span></p>
<p><span style="font-family:Arial">The BOOT macro can be used for the estimation
of the variance of a ratio estimator in designs where a constant number of
clusters (a &gt;1) is drawn from each stratum and the clusters are assumed to be
drawn with replacement. The last assumption can be relaxed when sampling from a
large population of clusters. The design can involve weighting of sample
observations; in this case a cluster- level data set including weighted cluster
sample sums obtained using rescaled element weights that sum up to the actual
sample size, should be used as input. The response variable can be binary or
continuous.</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="MsoNormal">&nbsp;<o:p>
</o:p>
</p>

</body>

</html>